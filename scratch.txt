<original instructions>
Hi, I have been working with another team to create a NetBox plugin that integrates with Hedgehog's Kubernetes-based Ethernet fabric solution. The goal is to provide a user-friendly interface for customers to manage their custom resource definitions (CRDs) related to the Hedgehog fabric. The plugin will allow users to create, monitor, and inventory their CRDs through a web interface, leveraging NetBox's existing capabilities. 

The other team has already made significant progress, including creating a basic plugin structure and implementing the necessary API calls to interact with Hedgehog's Kubernetes cluster. They have also set up a dashboard to display the status of the CRDs and their synchronization with Kubernetes. Kubectl in the local environment is setup to so it can interact with a live hedgehog installation. Also, netbox-docker is installed and running, the previous dev team successfully created and installed the netbox plugin and got pretty far into its development, I am pretty happy with how things look so far, but the other team seemed to be getting stuck on being able to further progress the plugin development towards the desired UX and functionality, so I wanted to see if you can help bring this project to successful mvp, completing the features the other team was unable to complete. The other team created a variety of code, planning documents, documentation and other files that are all saved locally within this repo, so I think by studying those thoroughly, you should be able to get a good understanding of the current state of the project and what needs to be done next. Where we left off is the fabric detail page has buttons for "test connection" and "sync now" which the other team could not get to work, and there are a number of other features that are not yet implemented, such as the ability to create and manage the various CRDs through a web form interface.

In addition to all the files that are available locally, I wanted to share with you the original instructions I provided to the other team, which outline the overall goals and requirements for the NetBox plugin. These instructions should give you a clear understanding of what we are trying to achieve with this project:

I think it would be a good idea for you to thoroughly research the best practices for netbox plugin development before you get started. 

<original instructions>
Hi, I work for Hedgehog and we make an ethernet fabric solution that essentially uses kubernetes to manage physical ethernet switches. To configure the fabric, a user creates a variety of yaml objects for custom CRD's that are created by hedgehog. The hedgehog controllers then use the information provided in these cr's to create configuration files for ethernet switches. The customer does not need to be aware of the ethernet switches directly, the switches themselves, all the connections, all the objects that make up the physical fabric, they are all monitored in kubernetes and use kubernetes reconciliation to report metrics and object availability. And so customers only need to interact with kubernetes to configure and monitor their fabric. 

I need to create a simpler way for our customers to create, monitor, and have an inventory of the cr's they have applied to kubernetes for their hedgehog fabric. I think for each type of object, it would be cool to have a gui similar to a self service catalog where a customer could click a button to add a type of cr, and then be presented with a web form, and then be given the option to apply the configuration, and then be able to have an inventory of the cr's that have been applied in k8s for their fabric. A customer might have more than one fabric. And, it would be ideal if this system could sync with kubernetes and was able to display status on if the object is applied, if its live, if there are errors. We already have grafana dashboards so that wouldnt need to be comprehensive, but I think it would be helpful if customers could look at the objects that represent desired state and easily be able to tell if actual state was aligned with desired state from looking at their inventory of applied CR's. 

I think it would be ideal to do this as a netbox plugin. I dont know how extensible netbox is so we need to do some research and concept validation, but if it can support the type of UX I would like to have I think it would be ideal, many of our customers already use netbox, and it would be nice to not have to give them yet another tool to manage. 

I would like you to help me scope this out, validate the concept, and then create specifications and a plan to implement it. 

The hedgehog CR's that should be included in the initial scope are:
**VPC API CRDs:**
* External
* ExternalAttachment
* ExternalPeering
* IPv4Namespace
* VPC
* VPCAttachment
* VPCPeering

**Wiring API CRDs:**
* Connection
* Server
* Switch
* SwitchGroup
* VLANNamespace

The hedgehog documentation can be found here: https://hedgehog.io/docs/hedgehog/latest/
The hedgehog documentation for the API for these cr's can be found here: https://docs.hedgehog.cloud/latest/reference/fabric-api/
</original instructions>



--------------------------------


hi Claude, I was working with you in a previous session to develop a netbox plugin for an ethernet fabric software solution known as hedgehog open network fabric (ONF). It is a complex software project and we are about 70% completed with mvp. I need you to do thorough research on this project to be able to get very thoroughly up to speed on the vision, goals, coding standard, code base, and the exact state of the current project so you can pick up right where I left off with the previous agent. I was very dissapointed my claude code session with the previous agent crashed because it can take a while to get up to speed on a new project and sometimes when training a new agent doesnt go smoothly mistakes are made that can regress the state of the project. It is critical that we do not regress the state of the project, a tremendous amount of good work has already been done and we cannot afford to mess that up, so please do extensive research to get yourself fully up to speed, take as much time as you need to be confident of the exact existing state of all the code so you do not regress any good work that has already been done. 
To get yourself up to speed, I recommend you first review the original instructions that I used to start this project. Significant work has been done on the project since these original instructions were given but it still does a good job providing a high level outline for the vision and scope of the project as well as some information that will be good to research to get yourself fully up to speed with the background information you will need to work successfully on this project. Here are the original instructions:
<original instructions>
Hi, I have been working with another team to create a NetBox plugin that integrates with Hedgehog's Kubernetes-based Ethernet fabric solution. The goal is to provide a user-friendly interface for customers to manage their custom resource definitions (CRDs) related to the Hedgehog fabric. The plugin will allow users to create, monitor, and inventory their CRDs through a web interface, leveraging NetBox's existing capabilities. 

The other team has already made significant progress, including creating a basic plugin structure and implementing the necessary API calls to interact with Hedgehog's Kubernetes cluster. They have also set up a dashboard to display the status of the CRDs and their synchronization with Kubernetes. Kubectl in the local environment is setup to so it can interact with a live hedgehog installation. Also, netbox-docker is installed and running, the previous dev team successfully created and installed the netbox plugin and got pretty far into its development, I am pretty happy with how things look so far, but the other team seemed to be getting stuck on being able to further progress the plugin development towards the desired UX and functionality, so I wanted to see if you can help bring this project to successful mvp, completing the features the other team was unable to complete. The other team created a variety of code, planning documents, documentation and other files that are all saved locally within this repo, so I think by studying those thoroughly, you should be able to get a good understanding of the current state of the project and what needs to be done next. Where we left off is the fabric detail page has buttons for "test connection" and "sync now" which the other team could not get to work, and there are a number of other features that are not yet implemented, such as the ability to create and manage the various CRDs through a web form interface.

In addition to all the files that are available locally, I wanted to share with you the original instructions I provided to the other team, which outline the overall goals and requirements for the NetBox plugin. These instructions should give you a clear understanding of what we are trying to achieve with this project:

I think it would be a good idea for you to thoroughly research the best practices for netbox plugin development before you get started. 

<original instructions>
Hi, I work for Hedgehog and we make an ethernet fabric solution that essentially uses kubernetes to manage physical ethernet switches. To configure the fabric, a user creates a variety of yaml objects for custom CRD's that are created by hedgehog. The hedgehog controllers then use the information provided in these cr's to create configuration files for ethernet switches. The customer does not need to be aware of the ethernet switches directly, the switches themselves, all the connections, all the objects that make up the physical fabric, they are all monitored in kubernetes and use kubernetes reconciliation to report metrics and object availability. And so customers only need to interact with kubernetes to configure and monitor their fabric. 

I need to create a simpler way for our customers to create, monitor, and have an inventory of the cr's they have applied to kubernetes for their hedgehog fabric. I think for each type of object, it would be cool to have a gui similar to a self service catalog where a customer could click a button to add a type of cr, and then be presented with a web form, and then be given the option to apply the configuration, and then be able to have an inventory of the cr's that have been applied in k8s for their fabric. A customer might have more than one fabric. And, it would be ideal if this system could sync with kubernetes and was able to display status on if the object is applied, if its live, if there are errors. We already have grafana dashboards so that wouldnt need to be comprehensive, but I think it would be helpful if customers could look at the objects that represent desired state and easily be able to tell if actual state was aligned with desired state from looking at their inventory of applied CR's. 

I think it would be ideal to do this as a netbox plugin. I dont know how extensible netbox is so we need to do some research and concept validation, but if it can support the type of UX I would like to have I think it would be ideal, many of our customers already use netbox, and it would be nice to not have to give them yet another tool to manage. 

I would like you to help me scope this out, validate the concept, and then create specifications and a plan to implement it. 

The hedgehog CR's that should be included in the initial scope are:
**VPC API CRDs:**
* External
* ExternalAttachment
* ExternalPeering
* IPv4Namespace
* VPC
* VPCAttachment
* VPCPeering

**Wiring API CRDs:**
* Connection
* Server
* Switch
* SwitchGroup
* VLANNamespace

The hedgehog documentation can be found here: https://hedgehog.io/docs/hedgehog/latest/
The hedgehog documentation for the API for these cr's can be found here: https://docs.hedgehog.cloud/latest/reference/fabric-api/
</original instructions>

In anticipation of a possible claude code crash, I asked the previous agent to create extensive local project planning and management processes and local documents specifically to help a new agent get up to speed quickly. THis was supposed to include keeping frequent git commits, as well as keeping task tracking documents up to speed with the latest state of the project. Fortunately it does appear all changes made by the previous agent have been committed to git, so there is a lot of valuable information about all the projects history within the git history. Unfortunately, it does not look like the project management related documents have all been kept up to date. I do think they will still be very valuable in helping to determine the remaining tasks that still need to be done, but the difficult part you need to be very careful about before we get started writing any new code is getting all the project management and tracking documents organized, up to speed, and accurately reflecting the current state of the code. 

Going back to the beginning of the project, there have been a couple crashes of claude code agent sessions, and as a result, the project management and tracking documents for this project are disorganized and not up to date. The first thing I think you should do is any initial research you need to do to get yourself up to speed on the project. As you are doing that, I think it will be a great compliment to your goal of getting up to speed on the project, to organize and reconcile the project management documents. There are several project management documents scattered around the repository, I am not sure if I know about all of them, I am not sure if they are all related to each other, or if they may have been made at different times by different agents, I am not sure if they all reflect the same state of the project, or if different of these documents were last updated at different times and may reflect different states. I am not sure if the project documentation in the docs folder is up to date, I doubt it is though. Some of the local project management related documents are:
- `/home/ubuntu/cc/hedgehog-netbox-plugin/PROJECT_MANAGEMENT.md`
- `/home/ubuntu/cc/hedgehog-netbox-plugin/PROJECT_STATUS.md`
- `/home/ubuntu/cc/hedgehog-netbox-plugin/TASK_TRACKING.md`
- `/home/ubuntu/cc/hedgehog-netbox-plugin/ARCHITECTURE_OVERVIEW.md`
- `/home/ubuntu/cc/hedgehog-netbox-plugin/DEVELOPMENT_LOG.md`
- `/home/ubuntu/cc/hedgehog-netbox-plugin/DEVELOPMENT_PROCESS.md`
- `/home/ubuntu/cc/hedgehog-netbox-plugin/DEVELOPMENT.md`
- `/home/ubuntu/cc/hedgehog-netbox-plugin/HEDGEHOG_ENVIRONMENT_ANALYSIS.md`

The primary purpose of the project management and tracking documents is to help ensure the project stays on track through MVP, and in particular across transitions between agents that happens occasionally due to occasional claude code crashes. I want to have thorough project management and tracking documents that have all the thorough, highly-detailed information an agent would need to get up to speed and productive quickly while maintaining extremely high quality standards. They should include robust processes and instructions for agents to follow to ensure all of the project management standards are followed and documents kept up to date, including making frequent git commits, updating project tracking documents to reflect the current state of the project so that completed tasks are marked down, the current task being worked on is appropriately notated to reflect current state, and the list of subsequent/remaining tasks is kept up to date. While these project management documents should be thorough, they should also be streamlined and efficient, and I would guess the project management documents that are currently in the repo may overlap and may be inconsistent. I think you should reconcile and streamline all these documents into a common set that are not overlapping and are very clearly organized, and I think you should make a dedicated subdirectory for all project management related documents so they dont get lost and are easier to keep organized in the future. As you are organizing the project management documents, remember that any or all of them may not be current, and that may be confusing - so always remember the gold standard for truth is the actual source code that is working right now in the project, as well as the git commit history. If you are evern in doubt about the actual state of the project, in cases where information in the project management  

Please note, in the most recent session I had with claude code, the agent had not yet committed any code, and was in the process of updating the project management files, they created the new `/home/ubuntu/cc/hedgehog-netbox-plugin/project_management` and I think had largely gotten a new project management document structure in place and at least partially updated, and then the claude code session crashed. I need you to try to pick up right where the previous agent left off, once you have done adequate background research to ensure you understand the project well enough to work on it without causing problems. 

Please note the current environment has kubectl installed and connected to a kubernetes cluster with a live fabric installation. Netbox is running on the local host within docker so you can use docker commands to learn about the netbox implementation. Also please note I will refer to this project as the Hedgehog Netbox Plugin or HNP. 

------------------------



Hi, I need your help to solve a problem. All of the code in the current directory was created by claude code, the project is ~90% complete, I have already shown previews to my boss so now I am under more pressure to get this done soon. But, I think the project has reached a size and complexity that is creating problems with claude code, or at least the manner in which I am using claude code, because, I have tried to get claude code to continue advancing the current project past the point where it is right now, and it just keeps crashing. I start a new instance, instruct it to do background research to understand the project, code, project management processes, and then to work on completing the next task to advance the project, and each time it crashes before its able to make progress on the current task, I have had claude code crash 5 times in a row now without being able to make any advancement to the project. I believe the problem is likely that the amount of context I am asking claude code to be able to comprehend to complete the next task has become overwhelming as the size and complexity of the code base has increased. 
I believe this is a solvable problem. Like humans, llm's do not have capacity for infinite context, and so we divide to conquer. Just like different humans work on different parts of a complex development projects, I think LLMs benefit from the same type of organization. If we consider for example the most recent issue that was being worked on when multiple successive instances of claude code crashed, it involved analyzing and troubleshooting the synchronization process between the hedgehog netbox plugin (HNP), and a kubernetes cluster with hedgehog open network fabric (ONF) running. I believe if we could task the agent with just the right information they needed to know to complete a task, that agent would be less likely to encounter issues do to very large context sizes than an agent that were trained in more information than were needed to complete that task. 

I am aware of another project that is like a meta-wrapper for claude code which has shown great efficacy at developing very large and complex applications using claude code alone, and it does it by being a multi-agent system that has dedicated orchestrator, architect, coder, tester, etc type roles, some roles may be longer running roles that assist on tasks throughout the duration of the project, but wherever possible, tasks are delegated to short-lived agents that only exist to complete a particular task, which is really crucial to use as much as possible to help minimize the context window sizes for the longer-running agent(s). I would use that project right now, but it doesnt work in this environment and I need to work in this environment as the kubernetes and docker assets needed to provide the development environment needed for this project are in this environment. 

I believe it would be effective if we tried to use the same approach as the multi-agent system I referenced above, but in a more primitive manner, where I the user will act as the communication bus between the agents. I would like you to act as the orchestrator for this system, it is up to you whether you act as the project manager or if you delegate the project manager role to another agent. I want you to act as my primary interface to the project, you need to be a technical expert, like a lead software consultant for thoughtworks type role who understands the project well on a technical level but also can communicate well with a technical and highly involved customer. 

The really hard and tricky part about such a multi-agent system like this is providing a task worker everything they need to know to do a really excellent job, but not more than that, which is really hard to figure out. I have a long-standing habit of having agents vastly over-prepare to complete project tasks, and the reason why I have done that, is because I have also had a lot of problems with agent's work quality when onboarding new agents, and overpreparing agents has been a fairly effective method, but doesnt scale because as the projects get larger and more complex, it results in just too much context required before an agent can even begin to start working on tasks. It is critical that agents have enough background preparation to complete tasks while maintaining an exceptionally high quality standard. It is equally critical that we do not overload agents session context with information that is not needed. We cannot risk lowering quality, so we need to provide adequate context, and need to be extremely thoughtful to ensure we provide just the right contextual information and known effective agentic instructions that ensure the agent will ask the user for input rather than hallucinating answers if they get confused about anything. 

Please think about all that I have said, and think about how you will fulfill your role as orchestrator. For yourself and all agents, you should use the local filesystem as much as possible. For example if you want to have an agent perform some task, depending on the complexity of the message, you could ask me to put a message into the prompt for the other agent, or you could create a file in the local filesystem, which is more ideal for very long/complex messages than asking me to copy/paste a message into the prompt for another agent. If you put a long/complex message into a local file, you would still need me to send a message to the other agent, but it could be a very simple message that pointed to the local file with the instructions for the agent, which would likely work better for long/complex messages. Keep in mind, all agents in this multi-agent system we will use are all claude code running in different terminal sessions of the same exact environment. Whenever possible, use the environment itself to communicate details with other agents, create local files, and instruct other agents to save their work in local files in an organized manner that is easy to keep track of. Also use git with frequent commits and conventional commit messaging, and leverage it when needed as a mechanism to communicate details to other agents. One key method for communicating between agents, for communications related to project tasks, is using the files and processes outlined in the `/home/ubuntu/cc/hedgehog-netbox-plugin/project_management` directory. If you need to create other files that do not need to be tracked by git, feel free to create any type of files you think will be effective within the `/home/ubuntu/cc/hedgehog-netbox-plugin/gitignore/` directory as that entire directory is already listed in the .gitignore file so we can create any subdirectories or files within it for those that do not need to be tracked by git, if something like that is needed. 

As the orchestrator, your primary job will be coming up with highly effective prompts that will be nuanced to give agents just the right amount of information they need to know, typically by telling them to do specific research on relevant local files, including how to follow the proceeses they need to for project management such as which project tracking files they may need to update when they start or complete a task, git commit practices, etc. As I mentioned there may be long running prompts in which case you may instruct me to create an agent with a unique name and expertise, I will keep that tab open so you can ask me to relay subsequent questions as needed. And you can also ask me to create short-lived agents who exist for the purpose of completing a specific task.

It is critical that you think very deeply about how to be as effective as possible at your role while minimizing the amount of session context that you or any agent, but especially long-running agents, use. There is no agent that exists that has infinite context or perfect memory management, at some point all agents performance will deteriorate when the context grows too large and session histories get too compacted. Assigning a short-lived agent to do some task and putting the result in some file can so you only have to review the results is a great way to limit the amount of context you need to use in your session. 

I mentioned earlier that claude code has crashed 5 times in a row before being able to complete the current task, below is the prompt I used, I dont recommend trying to follow the instructions exactly as I think it results in too much research being done about the project overwhelming the session context, so please learn from its example, and assign tasks for other agents by providing me with exact prompts that are designed with nuance to ensure the instructions in the prompt will result in the agent having enough information about 

Hi, I was just working on the project in the local directory with you in a previous session and the session crashed. Before the session crashed, I had the previous agent prepare a mature document based project management process for exactly this purpose. Please thoruoughly review all the documents in the `/home/ubuntu/cc/hedgehog-netbox-plugin/project_management` and any source code files as much as needed so you are thoruoughly prepared to do very high quality work on this project. The project management documentation should be up to date with the task that the previous agent was working on when it crashed at the level of detail appropriate for the project tracking document. But in terms of exactly what the agent had most recently done, if it involved changing files, the git status of the local environment should reflect accurate details. I am hoping that will provide you enough detail to pick up close to where the previous agent was when the session crashed, thanks!

You are a Kubernetes-to-NetBox Import Specialist for the Hedgehog NetBox Plugin (HNP).

  Your task is to implement the critical import functionality that creates NetBox records from
  discovered Kubernetes CRDs during sync operations.

  Read and follow the detailed instructions at:
  /home/ubuntu/cc/hedgehog-netbox-plugin/gitignore/agent_instructions/import_implementation_age
  nt.md

  This file contains:
  - Complete implementation requirements
  - Specific files to review
  - Testing requirements  
  - Project management tasks
  - Quality standards

  Start by reading those instructions thoroughly, then implement the import functionality. 
  Report your results as specified in the instructions.

  This is the #1 blocking issue preventing users from seeing their existing CRDs after adding a
   fabric to HNP.


    Hi, You were previously working on this project and crashed, let me get you back up to speed. I am undergoing a
  major transformation for this project, and I would like you to pair with another dev to collaborate, share
  opinions, and verify   each others work. One thing is, there isnt a way for you to communicate directly with
  them, you are dev A, there is also dev C. you share the same local env so you can see the same
  filesystem, you all have access to the internet and to github so can read issue tickets and such. You can also
  ask me to pass messages between you. This project was focused on making operational management tools for hedgehog
  open network fabric software. It was abandoned a while back, and we are reviving it, but, we now have a more
  urgent need to develop design and implementation excellence tools (diet) before we finish the operational
  management tools, and so the intent is to revive the project, but in doing so to turn the initial focus to the
  diet tools before resuming development on the operations toolset. You can use gh cli or use any of the creds in
  the .env file such as the GITHUB_USERNAME and    GITHUB_TOKEN values as needed to complete project tasks. Please
  review issue tickets #82 to understand project history, #83 to understand the intent with the diet tools, and
  you had just finished 148 when you crashed.  do any background preparation necesszary and let me know when you have
  had the chance to review and get up to speed and I will provide you more specific instructions on what youre to
  do next, thanks!