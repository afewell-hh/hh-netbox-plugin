{% extends 'base/layout.html' %}
{% load helpers %}

{% block title %}Delete Fabric{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center">
    <div>
        <h1>Delete Fabric</h1>
    </div>
    <div>
        <a href="{{ return_url }}" class="btn btn-outline-secondary">
            <i class="mdi mdi-arrow-left" aria-hidden="true"></i> Cancel
        </a>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="card">
            <h5 class="card-header">
                <i class="mdi mdi-alert" aria-hidden="true"></i>
                Confirm Deletion
            </h5>
            <div class="card-body">
                <div class="alert alert-danger">
                    <i class="mdi mdi-alert" aria-hidden="true"></i>
                    <strong>Warning:</strong> This action cannot be undone. The fabric and all related objects will be permanently deleted.
                </div>

                <p>
                    Are you sure you want to delete the fabric <strong>{{ fabric.name }}</strong>?
                </p>

                {% if related_counts %}
                <div class="alert alert-warning">
                    <h6><i class="mdi mdi-information" aria-hidden="true"></i> Related Objects</h6>
                    <p>The following related objects will also be deleted:</p>
                    <ul>
                        {% for object_type, count in related_counts.items %}
                        <li>{{ count }} {{ object_type }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}

                <form method="post" action="{{ confirm_url }}">
                    {% csrf_token %}
                    <div class="d-flex justify-content-end">
                        <a href="{{ return_url }}" class="btn btn-outline-secondary me-2">
                            <i class="mdi mdi-arrow-left" aria-hidden="true"></i> Cancel
                        </a>
                        <button type="submit" class="btn btn-danger">
                            <i class="mdi mdi-trash-can" aria-hidden="true"></i> Delete
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}